import{e as v,f as b,g as P,u as g,_ as A,n as w,r as S,o as h,h as G,i as I,a as d,j as E,d as x}from"./app-D2OjeLsA.js";import C from"./MyIcon-Co4BuAL2.js";import{_ as B}from"./plugin-vue_export-helper-DlAUqK2U.js";const L=v({__name:"NavMusic",setup(M,{expose:i}){i();const r=[{name:"风起时, 想你",artist:"陈楚生",url:"/painlife/mp3/风起时想你.mp3",cover:"/painlife/img/playBtn.webp",lrc:""}];let n,s=b(!1),l=[];const c=()=>{s.value=!s.value},p=()=>{s.value&&(s.value=!1)},y=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const o=document.createElement("div");o.id="MyMusic_Menu",o.classList.add("nav-item"),o.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(o)}const t=document.querySelector("#MyMusic_Menu");t.onclick=o=>{c(),o.stopPropagation()};const a=document.querySelector(".MyMusic");a.onclick=o=>{o.stopPropagation()}},m=()=>{if(!n)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||l.length<1||(u(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new n({container:document.getElementById("GlobalAPlayer"),audio:l,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){u()}),e.GlobalAPlayer.on("pause",function(){u()}))};function u(){var t,a;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(console.log("enter"),e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin",!1):(a=document.getElementById("MyMusic_icon"))==null||a.setAttribute("spin",!0))}const _=e=>{console.log(r),l=r,e&&e()};P(()=>{const e=g();_(()=>{A(()=>import("./APlayer.min-C49CcAHG.js").then(t=>t.A),[]).then(t=>{w(()=>{n=t.default,y(),m(),window.document.body.onclick=()=>{p()}}),e.afterEach(()=>{setTimeout(()=>{y(),m()},50)})})})});const f={musicData:r,get APlayer(){return n},set APlayer(e){n=e},get IsShow(){return s},set IsShow(e){s=e},get GlobalMusicList(){return l},set GlobalMusicList(e){l=e},SwitchStatus:c,CloseStatus:p,InsertMenu:y,NewPlayer:m,AddBtnSpin:u,LoadMusicList:_,MyIcon:C};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),N={class:"MyMusic"};function k(M,i,r,n,s,l){const c=S("ClientOnly");return h(),G(c,null,{default:I(()=>[d("div",N,[d("div",{class:E(["MyMusic_Play",{hide:!n.IsShow}])},[d("div",{class:"close",onClick:n.CloseStatus},[x(n.MyIcon,{name:"guanbi"})]),i[0]||(i[0]=d("div",{id:"GlobalAPlayer"},null,-1))],2)])]),_:1})}const V=B(L,[["render",k],["__file","NavMusic.vue"]]);export{V as default};
