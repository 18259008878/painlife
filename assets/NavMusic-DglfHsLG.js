import{e as v,j as b,z as P,f as A,_ as g,K as w,r as S,o as h,L as G,M as I,a as u,N as E,d as x}from"./app-PJeQwHrB.js";import C from"./MyIcon-SxfSYqSe.js";import{_ as L}from"./plugin-vue_export-helper-DlAUqK2U.js";const B=v({__name:"NavMusic",setup(M,{expose:i}){i();const d=[{name:"风起时, 想你",artist:"陈楚生",url:"/painlife/mp3/风起时想你.mp3",cover:"/painlife/img/playBtn.webp",lrc:""}];let n,s=b(!1),a=[];const r=()=>{s.value=!s.value},p=()=>{s.value&&(s.value=!1)},y=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const o=document.createElement("div");o.id="MyMusic_Menu",o.classList.add("nav-item"),o.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(o)}const t=document.querySelector("#MyMusic_Menu");t.onclick=o=>{r(),o.stopPropagation()};const l=document.querySelector(".MyMusic");l.onclick=o=>{o.stopPropagation()}},m=()=>{if(!n)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||a.length<1||(c(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new n({container:document.getElementById("GlobalAPlayer"),audio:a,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){c()}),e.GlobalAPlayer.on("pause",function(){c()}))};function c(){var t,l;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin","false"):(l=document.getElementById("MyMusic_icon"))==null||l.setAttribute("spin","true"))}const _=e=>{a=d,e&&e()};P(()=>{const e=A();_(()=>{g(()=>import("./APlayer.min-C49CcAHG.js").then(t=>t.A),[]).then(t=>{w(()=>{n=t.default,y(),m(),window.document.body.onclick=()=>{p()}}),e.afterEach(()=>{setTimeout(()=>{y(),m()},50)})})})});const f={musicData:d,get APlayer(){return n},set APlayer(e){n=e},get IsShow(){return s},set IsShow(e){s=e},get GlobalMusicList(){return a},set GlobalMusicList(e){a=e},SwitchStatus:r,CloseStatus:p,InsertMenu:y,NewPlayer:m,AddBtnSpin:c,LoadMusicList:_,MyIcon:C};return Object.defineProperty(f,"__isScriptSetup",{enumerable:!1,value:!0}),f}}),N={class:"MyMusic"};function k(M,i,d,n,s,a){const r=S("ClientOnly");return h(),G(r,null,{default:I(()=>[u("div",N,[u("div",{class:E(["MyMusic_Play",{hide:!n.IsShow}])},[u("div",{class:"close",onClick:n.CloseStatus},[x(n.MyIcon,{name:"guanbi"})]),i[0]||(i[0]=u("div",{id:"GlobalAPlayer"},null,-1))],2)])]),_:1})}const V=L(B,[["render",k],["__file","NavMusic.vue"]]);export{V as default};
