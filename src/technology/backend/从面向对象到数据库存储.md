---
icon: fa-solid fa-database
date: 2024-11-26
category:
  - 数据库
  - 面向对象
---

# 从面向对象到数据库存储

## 继承关系的存储

对于继承关系，我们一般有两种存储方式：

1. **合并存储**：将所有子类和父类的字段都存储在一张表中，不同子类建立不同表。

比如，B、C继承A。那么 B建立一张表，C建立一张表。B表和C表都存储A表的数据。
然后B表存储自己独特的字段，C表存储自己独特的字段。

这样做的好处是，查询方便，不用做表关联，插入删除也方便。

2. **分开存储**：将父类和子类分别存储在不同的表中，子表通过外键关联父表。

比如，B、C继承A。那么三个类分成三个表，每张表存储自己独特的字段。然后B表和C表通过外键关联A表。
这样做查询时需要建立表的链接，比较费时，而且插入删除时需要多表操作比较麻烦。
但是假如一般类也可以生成对象，那么这种方法比较合适。

## 聚合关系的存储

对于聚合关系，我们有以下集中存储方式：

1. **一对一关系**：可以存成两张表，通过外键关联。但更多的是存成一张表，这样减少开销

2. **一对多关系**：一般存成两张表，通过外键关联。当然也可以化简成一张表（往多端靠拢）。

3. **多对多关系**：一般存成三张表，通过外键关联。或者耍流氓存向量或者json，但是这样就违背了关系型数据库的设计理念。
